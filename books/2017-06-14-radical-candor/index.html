<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2017-06-14">
<meta name="description" content="Radical Candor: Be a Kick-Ass Boss Without Losing Your Humanity by Kim Malone Scott - (Kindle)">

<title>self halt - Radical Candor</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="self halt - Radical Candor">
<meta property="og:description" content="Radical Candor: Be a Kick-Ass Boss Without Losing Your Humanity by Kim Malone Scott - (Kindle)">
<meta property="og:image" content="https://blog.hanif.io/books/2017-06-14-radical-candor/radical-candor.jpg">
<meta property="og:site_name" content="self halt">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">self halt</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">Mahmood Hanif</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../books.html"> 
<span class="menu-text">book log</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Radical Candor</h1>
                  <div>
        <div class="description">
          <strong>Radical Candor: Be a Kick-Ass Boss Without Losing Your Humanity</strong> by Kim Malone Scott - (<em>Kindle</em>)
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">2017</div>
                <div class="quarto-category">Kindle</div>
                <div class="quarto-category">non-fiction</div>
                <div class="quarto-category">management</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">June 14, 2017</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#model" id="toc-model" class="nav-link active" data-scroll-target="#model">Model</a>
  <ul class="collapse">
  <li><a href="#part-1-a-new-management-philosophy" id="toc-part-1-a-new-management-philosophy" class="nav-link" data-scroll-target="#part-1-a-new-management-philosophy">Part 1: A New Management Philosophy</a></li>
  <li><a href="#chapter-1-build-radically-candid-relationships" id="toc-chapter-1-build-radically-candid-relationships" class="nav-link" data-scroll-target="#chapter-1-build-radically-candid-relationships">Chapter 1: Build Radically Candid Relationships</a></li>
  <li><a href="#chapter-2-get-give-and-encourage-guidance" id="toc-chapter-2-get-give-and-encourage-guidance" class="nav-link" data-scroll-target="#chapter-2-get-give-and-encourage-guidance">Chapter 2: Get, Give, and Encourage Guidance</a></li>
  <li><a href="#chapter-3-understand-what-motivates-each-person-on-your-team" id="toc-chapter-3-understand-what-motivates-each-person-on-your-team" class="nav-link" data-scroll-target="#chapter-3-understand-what-motivates-each-person-on-your-team">Chapter 3: Understand What Motivates Each Person on Your Team</a></li>
  <li><a href="#chapter-4-drive-results-collaboratively" id="toc-chapter-4-drive-results-collaboratively" class="nav-link" data-scroll-target="#chapter-4-drive-results-collaboratively">Chapter 4: Drive Results Collaboratively</a></li>
  <li><a href="#part-2-tools-techniques" id="toc-part-2-tools-techniques" class="nav-link" data-scroll-target="#part-2-tools-techniques">Part 2: Tools &amp; Techniques</a></li>
  <li><a href="#chapter-5-relationships" id="toc-chapter-5-relationships" class="nav-link" data-scroll-target="#chapter-5-relationships">Chapter 5: Relationships</a></li>
  <li><a href="#chapter-6-guidance" id="toc-chapter-6-guidance" class="nav-link" data-scroll-target="#chapter-6-guidance">Chapter 6: Guidance</a></li>
  <li><a href="#chapter-7-team" id="toc-chapter-7-team" class="nav-link" data-scroll-target="#chapter-7-team">Chapter 7: Team</a></li>
  <li><a href="#chapter-8-results" id="toc-chapter-8-results" class="nav-link" data-scroll-target="#chapter-8-results">Chapter 8: Results</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="radical-candor.jpg" class="img-fluid quarto-figure quarto-figure-left figure-img"></p>
<figcaption><strong>Radical Candor: Be a Kick-Ass Boss Without Losing Your Humanity</strong> by Kim Malone Scott</figcaption>
</figure>
</div>
<p>I first came across the author in a article describing the TED Talk she had given on the primary concept behind Radical Candor - that as a manager you need to both <em>Care Personally</em> and <em>Challenge Directly</em>. The article and talk resonated well with me but when the book came out I was worried that it really only had one great idea that would be repeated in different variations ad nauseum through the book. I was pleasantly suprised to found that the book had greater depth and a number of valuable lessons in it.</p>
<section id="model" class="level2">
<h2 class="anchored" data-anchor-id="model">Model</h2>
<section id="part-1-a-new-management-philosophy" class="level3">
<h3 class="anchored" data-anchor-id="part-1-a-new-management-philosophy">Part 1: A New Management Philosophy</h3>
</section>
<section id="chapter-1-build-radically-candid-relationships" class="level3">
<h3 class="anchored" data-anchor-id="chapter-1-build-radically-candid-relationships">Chapter 1: Build Radically Candid Relationships</h3>
<ul>
<li>Bosses guide a team to achieve results</li>
<li>Manager’s three areas of responsibility:
<ul>
<li>Guidance: Create a culture of guidance (praise and criticism) that will keep everyone moving in the right direction.</li>
<li>Team-building: Understand what motivates each person on your team well enough to avoid burnout or boredon and keep the team cohesive.</li>
<li>Results: Drive results collaboratively</li>
</ul></li>
<li>“It isn’t simply a matter of allowing your approach to your responsibilities to show that you care, however; you must also care deeply about people while being prepared to be hated in return.”</li>
<li>‘Radical Candor’ is what happens when you put ‘Care Personally’ and ‘Challenge Directly’ together</li>
</ul>
</section>
<section id="chapter-2-get-give-and-encourage-guidance" class="level3">
<h3 class="anchored" data-anchor-id="chapter-2-get-give-and-encourage-guidance">Chapter 2: Get, Give, and Encourage Guidance</h3>
<ul>
<li>‘Obnoxious aggression’ - when you challenge directly but don’t care personally</li>
<li>‘Manipulative insincerity’ - when you don’t challenge directly or care personally</li>
<li>‘Ruinous empathy’ - when you care personally but don’t challenge directly</li>
<li>Radical candor: “Whisper: ‘Your fly is down!’”</li>
<li>Obnoxious aggression: “Shout: ‘Look, his fly is down!’”</li>
<li>Manipulative insincerity: Silent - worried about your feelings</li>
<li>Ruinous empathy: Silent - worried about his feelings</li>
</ul>
</section>
<section id="chapter-3-understand-what-motivates-each-person-on-your-team" class="level3">
<h3 class="anchored" data-anchor-id="chapter-3-understand-what-motivates-each-person-on-your-team">Chapter 3: Understand What Motivates Each Person on Your Team</h3>
<ul>
<li><em>Superstar</em>
<ul>
<li>Steep growth trajectory</li>
<li>Change agent</li>
<li>Ambitious at work</li>
<li>Want new opportunities</li>
</ul></li>
<li><em>Rockstar</em>
<ul>
<li>Gradual growth trajectory</li>
<li>Force for stability</li>
<li>Ambitious outside of work</li>
<li>Happy in the current role</li>
</ul></li>
<li>Your job as manager is not to provide purpose but instead to get to know each of your direct reports well enough to understand how each one derives meaning from work</li>
<li>Excellent Performance: Keep your top performers top of mind</li>
<li>Excellent Performance / Gradual growth trajectory: Recognize, reward but don’t promote</li>
<li>Excellent Performance / Steep growth trajectory: Keep superstars challenged (and figure out who’ll replace them when they move on)</li>
<li>Managing the middle: Raise the bar - there’s no such thing as a B-player</li>
<li>Poor Performance / Negative growth trajectory: Part ways</li>
<li>Questions to consider before letting someone go:
<ul>
<li>Have you given Radically Candid guidance?</li>
<li>How is this person’s poor performance affecting the rest of the team?</li>
<li>Have you sought out a second opinion, spoken to someone whom you truyst and with whom you can talk the problem through?</li>
</ul></li>
<li>Common lies managers tell themselves to avoid firing someone who needs to be fired:
<ul>
<li>It will get better</li>
<li>Somebody is better than nobody</li>
<li>A transfer is the answer</li>
<li>It’s bad for morale</li>
</ul></li>
<li>Low performance / Steep growth trajectory: Manager, look yourself in the mirror!
<ul>
<li>Wrong role</li>
<li>New to role; too much too fast</li>
<li>Personal problems</li>
<li>Poor fit</li>
</ul></li>
<li>No permanent markers: people change and you have to change with them</li>
</ul>
<p>Have you ever underestimated an employee’s contributions because they weren’t gunning for a promotion? What happened? Did you regret it? Have you ever clipped the wings of an employee on a steep growth trajectory? What happened? Did you regret it? Are you more at risk of being an absentee manager or a micromanager? What kinds of situations push you towards one of these modes? Are you currently on a gradual or steep growth trajectory? Were you ever on the opposite one?</p>
</section>
<section id="chapter-4-drive-results-collaboratively" class="level3">
<h3 class="anchored" data-anchor-id="chapter-4-drive-results-collaboratively">Chapter 4: Drive Results Collaboratively</h3>
<p>Have you ever tried to tell a team of people what to do? What were the results? Which step(s) of the Get Stuff Done (GSD) Wheel are easiest or most comfortable for you? What steps do you tend to skip? Where do you get stuck? What are some of the practices your team or organization has today that fall into the different steps of the GSD wheel? Are you a quiet listener or a loud listener? Do you want to foster a culture of debate on a team? If so, how will you do it? If not, why not? How do you help your team make decisions? Are you worried you grab too many decisions?</p>
</section>
<section id="part-2-tools-techniques" class="level3">
<h3 class="anchored" data-anchor-id="part-2-tools-techniques">Part 2: Tools &amp; Techniques</h3>
</section>
<section id="chapter-5-relationships" class="level3">
<h3 class="anchored" data-anchor-id="chapter-5-relationships">Chapter 5: Relationships</h3>
<p>What activities do you do to stay centered? Describe an experience when you weren’t able to bring your best self to work. What happened? How do you build trust with your direct reports/ staff? What strategies or activities have been most effective, and how can you tell?</p>
</section>
<section id="chapter-6-guidance" class="level3">
<h3 class="anchored" data-anchor-id="chapter-6-guidance">Chapter 6: Guidance</h3>
<p>Have you solicited feedback from your direct reports/staff? If so, how have you done it, and has it been successful? Do you have a go-to question for soliciting feedback? What is it? What are some of the ways that you have rewarded criticism? Which of the book’s tips for giving guidance did you find most helpful? What’s something you could do tomorrow with someone on your team to offer Radical Candor?</p>
</section>
<section id="chapter-7-team" class="level3">
<h3 class="anchored" data-anchor-id="chapter-7-team">Chapter 7: Team</h3>
<p>Do you or can you begin facilitating “Career Conversations” with your direct reports, as a way of caring personally and helping them map out their career trajectories? Do you know the balance of rock stars and superstars on your team? How do you think about growth for different people? Did any of the book’s suggestions for hiring and firing resonate as applicable to your team/company?</p>
</section>
<section id="chapter-8-results" class="level3">
<h3 class="anchored" data-anchor-id="chapter-8-results">Chapter 8: Results</h3>
<p>How do you approach 1:1 meetings? How’s that different than the recommendations laid out in the book? Will you change your 1:1’s? How do you help nurture new ideas? Are there ideas from the book that you’ll adopt? Do you hold staff meetings? How do they compare to the approach in the book? Any recommendations that you’ll incorporate? Do you think the Big Debate or Big Decision meetings described in the book would help your team? What do you think about the number of meetings suggested in this chapter? How do you prevent meeting-creep from taking over the time your team should be spending executing?</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>